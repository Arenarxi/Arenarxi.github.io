window.__require=function t(e,o,n){function r(s,a){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var p="function"==typeof __require&&__require;if(!a&&p)return p(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var h=o[s]={exports:{}};e[s][0].call(h.exports,function(t){return r(e[s][1][t]||t)},h,h.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({ERR:[function(t,e,o){"use strict";cc._RF.push(e,"6fe12K+GcpJs6NgcLmbW11h","ERR");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.message=null,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.closeErr=function(){this.node.active=!1},e.prototype.openErr=function(t){this.message.string=t.slice(),this.node.active=!0},e.prototype.start=function(){},e.prototype.update=function(){},i([c(cc.Label)],e.prototype,"message",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],GG:[function(t,e,o){"use strict";cc._RF.push(e,"34802gjmNVIPLRi4m+SAs9m","GG");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._roomName="",e.playerName="",e.initObj=new Object,e.players=new Array,e.playerNumber=0,e.pointArr=[0,0,0,0],e.timeOut=!1,e.time=10,e.mode=4,e}return r(e,t),e.prototype.onEnable=function(){this.RoomName.string=this._roomName,this.schedule(this.timerCall,1);for(var t=0;t<this.players.length;t++)if(this.players[t]==this.playerName){this.playerNumber=t;break}this.msg("\u958b\u724c\u62c9",!0);var e=new Array;for(e.push(this.farme0.getComponent("fram")),e.push(this.farme1.getComponent("fram")),e.push(this.farme2.getComponent("fram")),e.push(this.farme3.getComponent("fram")),t=0;t<4;t++)e[t]._playerName=this.players[t],t==this.playerNumber&&(e[t]._playerName="you")},e.prototype.msg=function(t,e){this.message.active=e,this.message.getChildByName("msg").getComponent(cc.Label).string=t},e.prototype.timerCall=function(){this.time--,this.time<=0&&(this.timeOut=!0)},e.prototype.start=function(){},e.prototype.update=function(){var t=new Array;if(t.push(this.farme0.getComponent("fram")),t.push(this.farme1.getComponent("fram")),t.push(this.farme2.getComponent("fram")),t.push(this.farme3.getComponent("fram")),this.time>8);else if(this.time>6){if(4==this.mode){this.msg("",!1);for(var e=0;e<4;e++){for(var o=new Array,n=0;n<3;n++)o.push(this.initObj.Cards[e][n]);t[e].info=o.slice(),t[e].changeFlag=!0}this.mode--}}else if(this.time>3){if(3==this.mode){for(this.msg("",!1),e=0;e<4;e++){for(o=new Array,n=3;n<8;n++)o.push(this.initObj.Cards[e][n]);t[e].info=o.slice(),t[e].changeFlag=!0}this.mode--}}else if(2==this.mode){for(this.msg("",!1),e=0;e<4;e++){for(o=new Array,n=8;n<13;n++)o.push(this.initObj.Cards[e][n]);t[e].info=o.slice(),t[e].changeFlag=!0}this.mode--}this.timeOut&&(this.mode=4,this.unschedule(this.timerCall),this.timeOut=!1,this.time=10,this.Room.getComponent("Room").nextRound=!0,this.Room.active=!0,this.node.active=!1)},i([c(String)],e.prototype,"_roomName",void 0),i([c(String)],e.prototype,"playerName",void 0),i([c(Object)],e.prototype,"initObj",void 0),i([c(Array)],e.prototype,"players",void 0),i([c(Number)],e.prototype,"playerNumber",void 0),i([c(cc.Node)],e.prototype,"Room",void 0),i([c(cc.Node)],e.prototype,"farme0",void 0),i([c(cc.Node)],e.prototype,"farme1",void 0),i([c(cc.Node)],e.prototype,"farme2",void 0),i([c(cc.Node)],e.prototype,"farme3",void 0),i([c(cc.Node)],e.prototype,"message",void 0),i([c(cc.Label)],e.prototype,"RoomName",void 0),i([c(Array)],e.prototype,"pointArr",void 0),i([c(Boolean)],e.prototype,"timeOut",void 0),i([c],e.prototype,"time",void 0),i([c(Number)],e.prototype,"mode",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],RoomList:[function(t,e,o){"use strict";cc._RF.push(e,"f227eplEAJOKY1WlFT4I7CT","RoomList");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onOpenInfo=new Array,e.wsResponse=new Object,e.WebSocket=null,e.wsFlag="",e.game=null,e.Room=null,e.inRoom=!1,e.content=null,e.roomListPrefab=null,e.playerName="",e.newRoomName=null,e.joinRoomName="",e.joinFlag=!1,e}return r(e,t),e.prototype.onLoad=function(){this.instQueue=this.WebSocket.getComponent("webSocket").instQueue,this.currentInst=this.WebSocket.getComponent("webSocket").currentInst,this.node.getChildByName("NameLabel").getComponent(cc.Label).string="Name:"+this.playerName},e.prototype.onEnable=function(){this.generateRoomList(this.onOpenInfo)},e.prototype.generateRoomList=function(t){for(;0!=this.content.childrenCount;)this.content.removeAllChildren();for(var e=0;e<t.length;e++){var o=cc.instantiate(this.roomListPrefab),n=o.getComponent("roomPrefab");n.RoomNumber=e,n.roomSet(t[e]),n.RoomList=this,this.content.addChild(o)}},e.prototype.Exit=function(){delete this.onOpenInfo;var t=new Object;t.Type="exit.lobby",this.instQueue.push(t),console.log("ExitLobby:",t)},e.prototype.newRoom=function(){var t=new Object;t.Type="join.room",t.Name=this.newRoomName.string,this.joinRoomName=this.newRoomName.string,this.instQueue.push(t)},e.prototype.JoinRoom=function(){var t=new Object;t.Type="join.room",t.Name=this.joinRoomName,this.instQueue.push(t)},e.prototype.start=function(){},e.prototype.update=function(){if(this.wsResponse.changeFlag){var t=this.wsResponse.data.Type;"LocationMsg"==t&&"Logout"==this.wsResponse.data.Name&&(this.node.active=!1,this.game.active=!0),"RoomMsg"==t&&(1==this.wsResponse.data.Rooms.length&&this.wsResponse.data.Rooms[0].Name==this.joinRoomName&&(this.inRoom=!0),this.inRoom||this.generateRoomList(this.wsResponse.data.Rooms)),this.wsResponse.changeFlag=!1}this.joinFlag&&(this.JoinRoom(),this.joinFlag=!1),this.inRoom&&(this.Room.getComponent("Room").onOpenInfo=this.wsResponse.data.Rooms.slice(),this.Room.getComponent("Room")._roomName=this.joinRoomName.slice(),this.Room.getComponent("Room").playerName=this.playerName.slice(),Object.assign(this.Room.getComponent("Room").initObj,this.wsResponse.data),this.Room.active=!0,this.inRoom=!1,this.node.active=!1)},i([c(Array)],e.prototype,"onOpenInfo",void 0),i([c(Object)],e.prototype,"wsResponse",void 0),i([c(cc.Node)],e.prototype,"WebSocket",void 0),i([c(Array)],e.prototype,"instQueue",void 0),i([c(Object)],e.prototype,"currentInst",void 0),i([c],e.prototype,"wsFlag",void 0),i([c(cc.Node)],e.prototype,"game",void 0),i([c(cc.Node)],e.prototype,"Room",void 0),i([c(Boolean)],e.prototype,"inRoom",void 0),i([c(cc.Node)],e.prototype,"content",void 0),i([c(cc.Prefab)],e.prototype,"roomListPrefab",void 0),i([c],e.prototype,"playerName",void 0),i([c(cc.EditBox)],e.prototype,"newRoomName",void 0),i([c],e.prototype,"joinRoomName",void 0),i([c],e.prototype,"joinFlag",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Room:[function(t,e,o){"use strict";cc._RF.push(e,"87ccbZduqZPC4uAM8JbzPXM","Room");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wsResponse=new Object,e.WebSocket=null,e.wsFlag="",e.RoomList=null,e.GG=null,e.cardPrefab=null,e.fram0=null,e.fram1=null,e.fram2=null,e.fram3=null,e.RoomName=null,e.playerName="",e.gameMode="",e.cardMsg=new Array,e.roomMsg=new Object,e._roomName="",e.initObj=new Object,e.players=new Array,e.message=null,e.timer=null,e.timeoutFlag=!1,e.nextRound=!1,e.time=0,e}return r(e,t),e.prototype.onLoad=function(){this.instQueue=this.WebSocket.getComponent("webSocket").instQueue,this.currentInst=this.WebSocket.getComponent("webSocket").currentInst},e.prototype.Exit=function(){this.instQueue=this.WebSocket.getComponent("webSocket").instQueue;var t=new Object;t.Type="exit.room",this.instQueue.unshift(t),console.log("exit.room",t)},e.prototype.onEnable=function(){this.RoomName.string="Room:"+this._roomName,this.cardClear(),this.gameMode="waiting",this.nextRound&&(this.gameMode="gameStart",this.nextRound=!1);var t=0;this.initObj.Rooms[0].Players.forEach(function(e){""!=e&&t++}),4==t&&(this.gameMode="gameStart",this.players=this.initObj.Rooms[0].Players.slice())},e.prototype.start=function(){},e.prototype.msg=function(t,e){this.message.active=e,this.message.getChildByName("msg").getComponent(cc.Label).string=t},e.prototype.cardClear=function(){this.fram0.getChildByName("Layout").removeAllChildren(),this.fram1.getChildByName("Layout").removeAllChildren(),this.fram2.getChildByName("Layout").removeAllChildren(),this.fram3.getChildByName("Layout").removeAllChildren(),this.fram0.active=!1,this.fram1.active=!1,this.fram2.active=!1,this.fram3.active=!1},e.prototype.timeCount=function(t){this.time=t,this.timeoutFlag=!1,this.schedule(this.timeCallback,1)},e.prototype.timeCallback=function(){this.time--,this.timer.getComponent(cc.Label).string=this.time.toString(),0==this.time&&(this.unschedule(this.timeCallback),this.timeoutFlag=!0)},e.prototype.gameStart=function(){var t=this;this.cardClear(),this.msg("",!1),this.fram0.active=!0,this.fram1.active=!0,this.fram2.active=!0,this.fram3.active=!0,this.fram0.getChildByName("Layout").removeAllChildren();var e=new Array;this.cardMsg.forEach(function(t){-1!=t[0]&&(e=t.slice())}),e.sort(function(t,e){return t%13-e%13}),e.forEach(function(e){var o=cc.instantiate(t.cardPrefab);o.getComponent("cardPrefab").point=e,o.getComponent("cardPrefab").showOff=!0,t.fram0.getChildByName("Layout").addChild(o),o.y=0}),this.timeCount(25),this.gameMode="canPick"},e.prototype.gamePick=function(){if(this.timeoutFlag){var t=this.fram0.getChildByName("Layout").children,e=this.fram1.getChildByName("Layout").children,o=this.fram2.getChildByName("Layout").children,n=this.fram3.getChildByName("Layout").children,r=new Array;t.forEach(function(t){t.active&&r.push(t.getComponent("cardPrefab").point)}),e.forEach(function(t){t.active&&r.push(t.getComponent("cardPrefab").point)}),n.forEach(function(t){t.active&&r.push(t.getComponent("cardPrefab").point)}),o.forEach(function(t){t.active&&r.push(t.getComponent("cardPrefab").point)});var i=new Object;i.Type="set.card",i.Cards=r,this.instQueue.push(i),this.gameMode="gameAfterPick",this.timeoutFlag=!1}},e.prototype.gameEnd=function(){Object.assign(this.GG.getComponent("GG").initObj,this.wsResponse.data),this.GG.getComponent("GG").players=this.players.slice(),this.GG.getComponent("GG").playerName=this.playerName.slice(),console.log("palyerName in Room:",this.playerName),this.GG.active=!0,this.gameMode="gameStart",this.node.active=!1},e.prototype.cardSet2Fram1=function(){var t=this,e=this.fram0.getChildByName("Layout").children,o=new Array;e.forEach(function(t){"pressed"==t.getComponent("cardPrefab").cardMode&&(o.length<3&&(o.push(t.getComponent("cardPrefab").point),t.active=!1),t.getComponent("cardPrefab").cardMode="normal")}),o.forEach(function(e){var o=cc.instantiate(t.cardPrefab);o.getComponent("cardPrefab").point=e,o.getComponent("cardPrefab").showOff=!0,t.fram1.getChildByName("Layout").addChild(o),o.y=0})},e.prototype.cardSet2Fram2=function(){var t=this,e=this.fram0.getChildByName("Layout").children,o=new Array;e.forEach(function(t){"pressed"==t.getComponent("cardPrefab").cardMode&&(o.length<5&&(o.push(t.getComponent("cardPrefab").point),t.active=!1),t.getComponent("cardPrefab").cardMode="normal")}),o.forEach(function(e){var o=cc.instantiate(t.cardPrefab);o.getComponent("cardPrefab").point=e,o.getComponent("cardPrefab").showOff=!0,t.fram2.getChildByName("Layout").addChild(o),o.y=0})},e.prototype.cardSet2Fram3=function(){var t=this,e=this.fram0.getChildByName("Layout").children,o=new Array;e.forEach(function(t){"pressed"==t.getComponent("cardPrefab").cardMode&&(o.length<5&&(o.push(t.getComponent("cardPrefab").point),t.active=!1),t.getComponent("cardPrefab").cardMode="normal")}),o.forEach(function(e){var o=cc.instantiate(t.cardPrefab);o.getComponent("cardPrefab").point=e,o.getComponent("cardPrefab").showOff=!0,t.fram3.getChildByName("Layout").addChild(o),o.y=0})},e.prototype.update=function(){if(this.wsResponse.changeFlag){var t=this.wsResponse.data.Type;if("RoomMsg"==t)if("exit.room"==this.currentInst.Type)this.RoomList.getComponent("RoomList").onOpenInfo=this.wsResponse.data.Rooms.slice(),this.RoomList.active=!0,this.node.active=!1;else{Object.assign(this.roomMsg,this.wsResponse.data.Rooms[0]);var e=0;this.roomMsg.Players.forEach(function(t){""!=t&&e++}),4==e?(this.gameMode="gameStart",this.players=this.wsResponse.data.Rooms[0].Players.slice()):this.gameMode="waiting"}"CardMsg"==t&&(this.cardMsg=this.wsResponse.data.Cards.slice(),console.log("cardMsg:",this.cardMsg),"gameStart"==this.gameMode?this.gameStart():"gameAfterPick"==this.gameMode?this.gameMode="gameEnd":"gameEnd"==this.gameMode&&this.gameEnd()),this.wsResponse.changeFlag=!1}"waiting"==this.gameMode&&this.msg("\u7b49\u5f85\u52a0\u5165\u4e2d",!0),"gameStart"==this.gameMode&&this.msg("\u5373\u5c07\u958b\u59cb",!0),"canPick"==this.gameMode&&this.gamePick()},i([c(Object)],e.prototype,"wsResponse",void 0),i([c(cc.Node)],e.prototype,"WebSocket",void 0),i([c(Array)],e.prototype,"instQueue",void 0),i([c(Object)],e.prototype,"currentInst",void 0),i([c],e.prototype,"wsFlag",void 0),i([c(cc.Node)],e.prototype,"RoomList",void 0),i([c(cc.Node)],e.prototype,"GG",void 0),i([c(cc.Prefab)],e.prototype,"cardPrefab",void 0),i([c(cc.Node)],e.prototype,"fram0",void 0),i([c(cc.Node)],e.prototype,"fram1",void 0),i([c(cc.Node)],e.prototype,"fram2",void 0),i([c(cc.Node)],e.prototype,"fram3",void 0),i([c(cc.Label)],e.prototype,"RoomName",void 0),i([c(String)],e.prototype,"playerName",void 0),i([c(String)],e.prototype,"gameMode",void 0),i([c(Array)],e.prototype,"cardMsg",void 0),i([c(Object)],e.prototype,"roomMsg",void 0),i([c(String)],e.prototype,"_roomName",void 0),i([c(Object)],e.prototype,"initObj",void 0),i([c(Array)],e.prototype,"players",void 0),i([c(cc.Node)],e.prototype,"message",void 0),i([c(cc.Node)],e.prototype,"timer",void 0),i([c(Boolean)],e.prototype,"timeoutFlag",void 0),i([c(Boolean)],e.prototype,"nextRound",void 0),i([c],e.prototype,"time",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],cardPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"ce7b4WrTF5OiKC/HwIbx00d","cardPrefab");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cardMode="",e.point=-1,e.showOff=!0,e.cardAltas=null,e}return r(e,t),e.prototype.onLoad=function(){this.cardMode="normal"},e.prototype.pressed=function(){"normal"==this.cardMode?this.cardMode="pressed":this.cardMode="normal",console.log(this.cardMode)},e.prototype.start=function(){},e.prototype.update=function(){if(this.showOff){var t=this.cardAltas.getSpriteFrames();this.getComponent(cc.Sprite).spriteFrame=t[this.point]}"pressed"==this.cardMode?this.node.y=20:this.node.y=0},i([c(String)],e.prototype,"cardMode",void 0),i([c],e.prototype,"point",void 0),i([c],e.prototype,"showOff",void 0),i([c(cc.SpriteAtlas)],e.prototype,"cardAltas",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],fram:[function(t,e,o){"use strict";cc._RF.push(e,"16d835s9FROC4t0yRm6SyYy","fram");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.changeFlag=!1,e.info=new Array,e._playerName="",e.f1=null,e.f2=null,e.f3=null,e.playerName=null,e.cardTypeLabel=null,e.cardPrefab=null,e.text=null,e.point=0,e.cardType="High card",e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.onEnable=function(){this.cardTypeLabel.string="",this.playerName.getComponent(cc.Label).string=this._playerName,"you"==this._playerName&&(this.playerName.color=cc.color(255,192,0,255))},e.prototype.countPoint=function(){if(this.cardType="High card",3==this.info.length){for(var t=this.info.slice(),e=0;e<t.length;e++)t[e]%=13;var o=Math.max(t[0],t[1],t[2]);t[0]==t[1]&&t[1]==t[2]?(this.cardType="Three of a kind",this.point=48+o):t[0]==t[1]||t[0]==t[2]||t[1]==t[2]?(this.cardType="one pair",this.point=16+o):this.point=o}else{for(t=this.info.slice(),e=0;e<t.length;e++)t[e]%=13;console.log(this._playerName,"'s cardPointArr",t),o=Math.max(t[0],t[1],t[2],t[3],t[4]),this.straight(),this.flush(),"High card"==this.cardType&&this.pair(),"High card"==this.cardType?this.point=o:"One pair"==this.cardType?this.point=16+o:"Two pair"==this.cardType?this.point=32+o:"Three of a kind"==this.cardType?this.point=48+o:"Straight"==this.cardType?this.point=64+o:"Flush"==this.cardType?this.point=80+o:"Full house"==this.cardType?this.point=96+o:"Four of a Kind"==this.cardType?this.point=112+o:"Straight Flush"==this.cardType&&(this.point=128+o),console.log(this._playerName,"'s max",o)}console.log(this._playerName,"'s point",this.point),this.cardTypeLabel.string=this.cardType},e.prototype.pair=function(){var t=this,e=new Object;this.info.forEach(function(t){e[t%13]=0}),this.info.forEach(function(t){e[t%13]++}),this.info.forEach(function(o){2==e[o%13]?"One pair"==t.cardType?t.cardType="Two pair":"Three of a kind"==t.cardType?t.cardType="Full house":t.cardType="One pair":3==e[o%13]?"One pair"==t.cardType?t.cardType="Full house":t.cardType="Three of a kind":4==e[o%13]&&(t.cardType="Four of a Kind"),e[o%13]=0})},e.prototype.flush=function(){for(var t=this,e=this.info.slice(),o=0;o<e.length;o++)e[o]=Math.floor((e[o]-1)/13);var n=new Object;e.forEach(function(t){n[t]=0}),e.forEach(function(t){n[t]++}),e.forEach(function(e){5==n[e]&&("Straight"==t.cardType?t.cardType="Straight Flush":t.cardType="Flush"),n[e]=0})},e.prototype.straight=function(){for(var t=this.info.slice(),e=0;e<t.length;e++)t[e]%=13,1==t[e]&&(t[e]=14);t.sort(function(t,e){return e-t});var o=1;for(e=0;e<4;e++)o=(t[e]-t[e+1])*o;(1==o||9==o&&5==t[2])&&(this.cardType="Straight")},e.prototype.setCard=function(){var t=this;this.node.getChildByName("Layout").removeAllChildren(),this.info.forEach(function(e){var o=cc.instantiate(t.cardPrefab);o.getComponent("cardPrefab").point=e,o.getComponent("cardPrefab").showOff=!0,t.node.getChildByName("Layout").addChild(o),o.y=0})},e.prototype.setLevel=function(t){t>=3?this.text.string="\u6709\u5920\u8521":t>=2?this.text.string="\u905c\u6ce1":t>=1?this.text.string="\u9084\u884c":t>=0&&(this.text.string="\u5c4c\u6253")},e.prototype.start=function(){},e.prototype.update=function(){this.changeFlag&&(this.setCard(),this.countPoint(),this.changeFlag=!1);var t=0;this.point<this.f1.getComponent("fram").point&&t++,this.point<this.f2.getComponent("fram").point&&t++,this.point<this.f3.getComponent("fram").point&&t++,this.setLevel(t)},i([c(Boolean)],e.prototype,"changeFlag",void 0),i([c(Array)],e.prototype,"info",void 0),i([c(String)],e.prototype,"_playerName",void 0),i([c(cc.Node)],e.prototype,"f1",void 0),i([c(cc.Node)],e.prototype,"f2",void 0),i([c(cc.Node)],e.prototype,"f3",void 0),i([c(cc.Node)],e.prototype,"playerName",void 0),i([c(cc.Label)],e.prototype,"cardTypeLabel",void 0),i([c(cc.Prefab)],e.prototype,"cardPrefab",void 0),i([c(cc.Label)],e.prototype,"text",void 0),i([c(Number)],e.prototype,"point",void 0),i([c(String)],e.prototype,"cardType",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],game:[function(t,e,o){"use strict";cc._RF.push(e,"7e11bqgGV9KbLocYfLQAls4","game");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wsResponse=new Object,e.WebSocket=null,e.wsFlag="",e.LOGIN=null,e.ERR=null,e.playerName="",e.ipAddress=null,e.RoomList=null,e.Room=null,e.GG=null,e}return r(e,t),e.prototype.onLoad=function(){this.LOGIN.active=!0,this.RoomList.active=!1,this.Room.active=!1,this.GG.active=!1,this.wsResponse.changeFlag=!1,this.instQueue=this.WebSocket.getComponent("webSocket").instQueue,this.currentInst=this.WebSocket.getComponent("webSocket").currentInst},e.prototype.start=function(){},e.prototype.login=function(){this.ipAddress.getComponent(cc.EditBox).string!=this.WebSocket.getComponent("webSocket").address&&(this.WebSocket.getComponent("webSocket").address=this.ipAddress.getComponent(cc.EditBox).string.slice(),this.WebSocket.getComponent("webSocket").reconect());var t=this.LOGIN.getChildByName("EditBox").getComponent(cc.EditBox).string.slice();if(""==t)this.ERR.getComponent("ERR").openErr("name can't be empty"),console.log(t);else{var e=new Object;e.Type="join.lobby",e.Name=t,this.instQueue.push(e),this.playerName=t,console.log("GOGO:",e)}},e.prototype.update=function(){this.wsResponse.changeFlag&&("RoomMsg"==this.wsResponse.data.Type?(this.RoomList.getComponent("RoomList").onOpenInfo=this.wsResponse.data.Rooms.slice(),this.RoomList.getComponent("RoomList").playerName=this.playerName.slice(),this.RoomList.active=!0,this.wsFlag="",this.node.active=!1):this.ERR.getComponent("ERR").openErr("Name has been used"),this.wsResponse.changeFlag=!1)},i([c(Object)],e.prototype,"wsResponse",void 0),i([c(cc.Node)],e.prototype,"WebSocket",void 0),i([c(Array)],e.prototype,"instQueue",void 0),i([c(Object)],e.prototype,"currentInst",void 0),i([c],e.prototype,"wsFlag",void 0),i([c(cc.Node)],e.prototype,"LOGIN",void 0),i([c(cc.Node)],e.prototype,"ERR",void 0),i([c],e.prototype,"playerName",void 0),i([c(cc.Node)],e.prototype,"ipAddress",void 0),i([c(cc.Node)],e.prototype,"RoomList",void 0),i([c(cc.Node)],e.prototype,"Room",void 0),i([c(cc.Node)],e.prototype,"GG",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],roomPrefab:[function(t,e,o){"use strict";cc._RF.push(e,"330ac/epgdLaIqqj6xLmd1B","roomPrefab");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.RoomList=null,e.RoomNum=null,e.RoomName=null,e.RoomGuys=null,e.RoomNumber=-87,e.info=new Object,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.roomSet=function(t){this.info=t,this.RoomNum.string="#"+this.RoomNumber,this.RoomName.string=t.Name;var e=0;t.Players.forEach(function(t){""!=t&&e++}),this.RoomGuys.string=e.toString()},e.prototype.JoinRoom=function(){var t=this.RoomList.getComponent("RoomList");t.joinRoomName=this.RoomName.string,t.joinFlag=!0},e.prototype.start=function(){},i([c(cc.Node)],e.prototype,"RoomList",void 0),i([c(cc.Label)],e.prototype,"RoomNum",void 0),i([c(cc.Label)],e.prototype,"RoomName",void 0),i([c(cc.Label)],e.prototype,"RoomGuys",void 0),i([c(Number)],e.prototype,"RoomNumber",void 0),i([c(Object)],e.prototype,"info",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],timer:[function(t,e,o){"use strict";cc._RF.push(e,"f2529x5ttVCGZ4nHJzbRUX5","timer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Room=null,e.timeoutFlag=!0,e.clock=!1,e.time=-1,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.count=function(t){this.time=t,this.node.getComponent(cc.Label).string=t.toString(),this.schedule(function(){console.log("clock"),this.clock=!0},1,t,0)},e.prototype.start=function(){},e.prototype.update=function(){this.clock&&(this.node.getComponent(cc.Label).string=(this.time--).toString(),this.clock=!1),0==this.time&&(this.timeoutFlag=!0,this.Room.getComponent("Room").timeoutFlag=!0)},i([c(cc.Node)],e.prototype,"Room",void 0),i([c(Boolean)],e.prototype,"timeoutFlag",void 0),i([c],e.prototype,"clock",void 0),i([c],e.prototype,"time",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],webSocket:[function(t,e,o){"use strict";cc._RF.push(e,"3d87anlQbxG6IE3MxJNgKpm","webSocket");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=new Object,h="",l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wsStandby="",e.ws=null,e.wsFlag="",e.instQueue=new Array,e.game=null,e.RoomList=null,e.Room=null,e.background=null,e.ERR=null,e.currentInst=new Object,e.address="",e}return r(e,t),e.prototype.send=function(){this.currentInst=this.instQueue.shift(),this.currentInst&&this.ws.send(JSON.stringify(this.currentInst))},e.prototype.onLoad=function(){p.changeFlag=!1,this.ws=new WebSocket("wss://192.168.50.62:2345"),this.ws.addEventListener("message",function(t){p.data=JSON.parse(t.data),p.changeFlag=!0}),this.ws.onopen=function(){h="onOpen"},this.ws.onclose=function(){h="onClose"},this.ws.onerror=function(){h="onError"}},e.prototype.reconect=function(){p.changeFlag=!1,h="",this.ws.close(),this.ERR.getComponent("ERR").closeErr(),this.ws=new WebSocket("wss://"+this.address),this.ws.addEventListener("message",function(t){p.data=JSON.parse(t.data),p.changeFlag=!0}),this.ws.onopen=function(){h="onOpen"},this.ws.onclose=function(){h="onClose"},this.ws.onerror=function(){h="onError"}},e.prototype.start=function(){},e.prototype.update=function(){"onOpen"==h&&(h="onopen",this.wsStandby="onOpen"),"onClose"==h&&(this.wsStandby="close",this.ERR.getComponent("ERR").openErr("can't connect"),this.address="",h=""),"onError"==h&&(this.wsStandby="error",this.ERR.getComponent("ERR").openErr("server is something wrong Now")),"standBy"==this.wsStandby&&0!=this.instQueue.length&&(this.wsStandby="busy",this.send()),1==p.changeFlag&&("onOpen"==this.wsStandby?this.wsStandby="standBy":(this.game.active&&Object.assign(this.game.getComponent("game").wsResponse,p),this.RoomList.active&&Object.assign(this.RoomList.getComponent("RoomList").wsResponse,p),this.Room.active&&(Object.assign(this.Room.getComponent("Room").wsResponse,p),this.Room.getComponent("Room").currentInst=this.currentInst),this.wsFlag="true",this.wsStandby="standBy",console.log("Recive From WS:",p)),p.changeFlag=!1)},i([c(cc.String)],e.prototype,"wsStandby",void 0),i([c(WebSocket)],e.prototype,"ws",void 0),i([c],e.prototype,"wsFlag",void 0),i([c(Array)],e.prototype,"instQueue",void 0),i([c(cc.Node)],e.prototype,"game",void 0),i([c(cc.Node)],e.prototype,"RoomList",void 0),i([c(cc.Node)],e.prototype,"Room",void 0),i([c(cc.Node)],e.prototype,"background",void 0),i([c(cc.Node)],e.prototype,"ERR",void 0),i([c(Object)],e.prototype,"currentInst",void 0),i([c(String)],e.prototype,"address",void 0),i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}]},{},["ERR","GG","Room","RoomList","cardPrefab","fram","game","roomPrefab","timer","webSocket"]);